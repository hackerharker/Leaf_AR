<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src='text_component.js'></script>
    <script src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js'></script>
  </head>
  
  <body>
    
    <a-scene start="start" renderer="sortObjects:true"
 
    embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'>


      <a-assets>
        <img src="leaf_1.png" id="leaf 1">
        <img src="leaf_2.png" id="leaf 2">
        <img src="leaf_2_normal_map.png" id="leaf 2 normal map"/>
        <img src="leaf_1_normal_map.png" id="leaf 1 normal map" />
        <img src="leaf_3.png" id="leaf_3">
        <img src="leaf_3_normal_map.png" id="leaf_3_normal_map" />
        
      </a-assets>

      <!-- to be triggered by a marker image -->
      <!-- <a-nft
      type='nft' 
      url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/AR-js-org/AR.js/master/aframe/examples/image-tracking/nft/trex/trex-image/trex'
      smooth='true' smoothCount='10' smoothTolerance='0.01' smoothThreshold='5'> -->

      <!-- this is an example of a leaf made in HTML without text associated with it -->
      <a-entity
        geometry="primitive: plane; width: 2; height: 2"
        position="0 5 0"
        material="src:#leaf 1; side:double; transparent: true; normalMap:#leaf 1 normal map; roughness:1"
        animation="property: rotation; to: 0 359.999 0; dur: 8000; easing: linear; loop: true; "
        animation__Y="property: object3D.position.y; to: -4; dir: normal; dur: 30000; loop: true" 
        shadow="cast: true;"
      ></a-entity>

      <!-- this is an example of a leaf made in HTML, where there is a 'leaf container' with both the text and the leaf. 
            It is done this way so that the leaf and the text move across the screen together but only the leaf rotates 
            this is the beginning of the Notholithocarpus container -->

      <!-- this outermost entity is the container that contains the leaf and text and moves them across the screen -->
      <a-entity id="Notholithocarpus" animation__MV="property: position; to: -8 -5 2; dir: normal; dur: 20000; loop: true" position="2 1 3"> 
        
        <!-- this is the leaf entity within the Notholithocarpus container that rotates as it moves across the screen -->
        <a-entity
          geometry="primitive: plane; width: 2; height: 2"
          material="src:#leaf_3; side:double; transparent: true; normalMap:#leaf_3_normal_map; roughness:1"
          animation__RX="property: object3D.rotation.x; to: 359.999; dur: 10000; easing: linear; loop: true"
          animation__RY="property: object3D.rotation.y; to: 359.999; dur: 6000; easing: linear; loop: true"
          animation__RZ="property: object3D.rotation.z; to: 359.999 ; dur: 8000; easing: linear; loop: true"  
        ></a-entity>

        <!-- this is the text entity within the Notholithocarpus that follows the leaf as it moves across the screen -->
        <a-entity
        text="value: Notholithocarpus densiflorus; color: #FFD500; align: center"
        look-at="#camera"
        scale="2 2 2"
        position= "0 0 1"
        popup= "parent:#Notholithocarpus"
        ></a-entity>
      </a-entity> <!-- this is the end of the Notholithocarpus container-->


      <a-entity id="sequoia" animation__MV="property: position; to: -3 -1 4; dir: normal; dur: 20000; loop: true" position="3 4 1"> 
        <a-entity
          geometry="primitive: plane; width: 2; height: 2"
          
          material="src:#leaf 2; side:double; transparent: true; normalMap:#leaf 2 normal map; roughness:1"
          animation__RX="property: object3D.rotation.x; to: 359.999; dur: 10000; easing: linear; loop: true"
          animation__RY="property: object3D.rotation.y; to: 359.999; dur: 6000; easing: linear; loop: true"
          animation__RZ="property: object3D.rotation.z; to: 359.999 ; dur: 8000; easing: linear; loop: true"  
        >
        </a-entity>
        <a-entity
        text="value: Sequoia sempervirens; color: #FFD500; align: center"
        look-at="#camera"
        scale="2 2 2"
        position= "0 0 1"
        popup= "parent:#sequoia"

        ></a-entity>
      </a-entity> <!-- end sequoia container-->

      <!-- this sets the camera position -->
      <a-entity id= "camera" camera look-controls wasd-controls position="0 1 5"> </a-entity>
      
      <!-- these entities set the lighting- both ambient and point lights -->

      <!-- <a-entity
        light="type: point; castShadow: true"
        position="3 6 5"
      ></a-entity> -->

      <a-entity light="type: ambient; intensity: .3"
      ></a-entity> -->

      <a-entity light="type: point; intensity: 2; "
      position="0 100 200"></a-entity>

      <a-entity light="type: point; intensity: 1; "
      position="0 -200 100"></a-entity>

      <!-- I'm not sure what this line was doing... seems like a duplicate -->
      <!-- </a-nft>  -->
      <a-entity camera look-controls wasd-controls position="0 1 5"></a-entity>
    </a-scene>
  </body>
</html>
